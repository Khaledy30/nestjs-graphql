# SERVERMONO

## NestJS, GraphQL, Prisma and PlanetScale Project

Welcome to the NestJS project with GraphQL, Prisma, and PlanetScale! This guide will help you get started and provide an overview of the project's structure and processes.

## Prerequisites

Make sure you have Node.js and npm installed on your machine.


## Project Setup 

1. Clone this repository to your local machine.
2. Navigate to the project's root directory.

## Db diagram

Generate the schema by running npx prisma generate and then execute the following command:
arduino

```
npm run prisma:docs
```

You can access the database diagram at https://pantore.github.io/servermono/
￼

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨

## Installing Dependencies

Run the following command to install project dependencies:

```
npm install
```

# Project Structure

The project follows a monolithic architecture, where both the monolith and the gateway need to be running for the application to function properly. Here's an overview of the project structure:

- apps/
  - monolith/: Contains the code for the monolith server.
  - gateway/: Contains the code for the GraphQL gateway server.
  - libs/: Contains shared code and modules used by the monolith and the gateway.
  - prisma/: Contains Prisma configuration files and database schema.

## Initialization Scripts

The following scripts are available in the project:

## Start the Monolith

To start the monolith, use the following command:

```
npm run dev:monolith
```

This command will start the NestJS server with GraphQL in development mode. The monolith will run on http://localhost:3001/graphql.

## Start the Gateway

To start the gateway, use the following command:

```
npm run dev:gateway
```

This command will start the NestJS server with the GraphQL gateway in development mode. The gateway will run on http://localhost:3000/graphql.

## Open Prisma Studio

This will open a graphical interface where you can view and interact with your database.

To open Prisma Studio, use the following command:

```
npx prisma studio
```

Prisma Studio allows you to:

- Browse and explore your database tables.
- View table data and relationships.
- Add new records to the tables manually.


## Update the Model with PlanetScale

To update the model with PlanetScale using Prisma, use the following command:

```
npx prisma db push
```

This command will apply changes to the database schema based on the defined model.

## Run Tests

To run tests for the monolith, use the following command:

```
npm run test:monolith
```

This command will execute the test suite for the project.

## Instructions for Development of New Modules within the Monolith
When developing new modules within the monolith, follow the guidelines below:

1. Create a new directory within the src directory of the monolith.
2. Organize the code of the module according to the best practices and patterns adopted in the project.
3. Register the module in the app.module.ts file of the monolith to ensure proper loading.
4. Be sure to write adequate tests for the new module to ensure its quality and functionality.

# Understanding GraphQL Queries and Mutations

GraphQL is used as the query language for the API. Here's a brief explanation of queries and mutations:

- Queries: Used to fetch data from the server. They specify the fields and relationships to retrieve.
- Mutations: Used to modify data on the server. They allow you to create, update, or delete records.


## Conclusion

This is a basic guide to set up and initialize a NestJS project with GraphQL, using Prisma as the ORM and PlanetScale as the database. Make sure to refer to the official documentation of NestJS, GraphQL, Prisma, and PlanetScale, and follow the guidelines and standards established by the development team.
